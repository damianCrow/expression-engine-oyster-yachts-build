(function(e,t){"use strict";var n=e.Freeform=e.Freeform||{};n.shortName=function(e){var t="",n="_",r="",a={223:"ss",224:"a",225:"a",226:"a",229:"a",227:"ae",230:"ae",228:"ae",231:"c",232:"e",233:"e",234:"e",235:"e",236:"i",237:"i",238:"i",239:"i",241:"n",242:"o",243:"o",244:"o",245:"o",246:"oe",249:"u",250:"u",251:"u",252:"ue",255:"y",257:"aa",269:"ch",275:"ee",291:"gj",299:"ii",311:"kj",316:"lj",326:"nj",353:"sh",363:"uu",382:"zh",256:"aa",268:"ch",274:"ee",290:"gj",298:"ii",310:"kj",315:"lj",325:"nj",352:"sh",362:"uu",381:"zh"};if(t!==""){if(e.substr(0,t.length)==t){e=e.substr(t.length)}}e=e.toLowerCase();t=0;for(var i=e.length;t<i;t++){var l=e.charCodeAt(t);if(l>=32&&l<128){r+=e.charAt(t)}else if(a.hasOwnProperty(l)){r+=a[l]}}a=new RegExp(n+"{2,}","g");e=r;e=e.replace("/<(.*?)>/g","");e=e.replace(/\s+/g,n);e=e.replace(/\//g,n);e=e.replace(/[^a-z0-9\-\_]/g,"");e=e.replace(/\+/g,n);e=e.replace(a,n);e=e.replace(/-$/g,"");e=e.replace(/_$/g,"");e=e.replace(/^_/g,"");e=e.replace(/^-/g,"");e=e.replace(/\.+$/g,"");return e};n.insertToTextarea=function(e,t,n){n=n||false;if(!n&&typeof e.selectionEnd!=="undefined"&&!isNaN(e.selectionEnd)){var r=e.textLength;var a=e.selectionStart;var i=e.selectionEnd;var l=e.value.substring(0,a);var o=e.value.substring(a,i);var s=e.value.substring(i,r);var u=a+t.length;e.value=l+t+s;e.focus();e.selectionStart=u;e.selectionEnd=u}else if(document.selection){e.focus();document.selection.createRange().text=t;e.blur();e.focus()}else{e.value+=t}};n.tabTextarea=function(e,t){var n="    ";if(e.keyCode==9){if(typeof e.preventDefault!=="undefined"){e.preventDefault()}var r=t.scrollTop;e.returnValue=false;if(t.setSelectionRange){var a=t.selectionStart+4;t.value=t.value.substring(0,t.selectionStart)+n+t.value.substring(t.selectionEnd,t.value.length);setTimeout(function(){t.focus();t.setSelectionRange(a,a)},0)}else{t.focus();document.selection.createRange().text=n;t.blur();t.focus()}t.scrollTop=r;t.focus()}};n.autoGenerateShortname=function(e,t,r){var a=true;if(r&&r["length"]){a=r.attr("checked")=="checked";r.change(function(){a=r.attr("checked")=="checked";if(a){e.keyup()}})}e.keyup(function(){if(a){t.val(n.shortName(e.val()))}}).keyup()};n.formPrep=function(e){return t.trim(e.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))};function r(e,n){var r=0;e.find(".freeform_delete_button:last").hide();e.on("keyup","."+n+" input",function(){var a=this;clearTimeout(r);r=setTimeout(function(){var r=t(a),i=r.parent();if(t.trim(r.val())!==""&&i.is(t("."+n+":last",e))){var l=i.clone();l.find("input").each(function(e,n){var r=t(this);if(r.is('[type="text"]')){r.val("")}else{if(r.attr("selected")){r.attr("selected",false)}if(r.attr("checked")){r.attr("checked",false)}}var a=/([a-zA-Z\_\-]+)\[([0-9]+)\]/gi.exec(t(this).attr("name"));if(a){t(this).attr("name",a[1]+"["+(parseInt(a[2],10)+1)+"]")}});i.parent().append(l);i.find(".freeform_delete_button").show()}},250)})}n.autoDupeLastInput=r;function a(e,r,a){if(r=="channel_field"||e=="channel_field"){return}var i=[];var l=t('textarea[name="'+a+'_list_nld_textarea_input"]');var o=t('input[name*="'+a+'_list_holder_input"]');var s=t('input[name*="'+a+'_list_value_holder_input"]');var u=t('input[name*="'+a+'_list_label_holder_input"]');var f=t("#"+a+"_type_value_label_holder");var c=t("#"+a+"_type_list_holder");var d;var v;if(e=="nld_textarea"){var h=l.val().split(/\n\r|\n|\r/gi);for(d=0,v=h.length;d<v;d++){var p=h[d];if(p!==""){i.push(p)}}}else if(e=="value_label"){u.each(function(){var e=t(this).val();if(e!==""){i.push(e)}})}else if(e=="list"){o.each(function(){var e=t(this).val();if(e!==""){i.push(e)}})}if(i.length===0){return}var _;var m;if(r=="nld_textarea"){l.val(i.join("\n"))}else if(r=="value_label"){var g={};u.each(function(e){var t=n.formPrep(u.eq(e).val());var r=n.formPrep(s.eq(e).val());if(t!==""&&r!==""){g[t]=r}});_=t(".value_label_holder_input",f);m=_.eq(0).clone();_.remove();i.push("");for(d=0,v=i.length;d<v;d++){var y=n.shortName(i[d]);if(y===""){y=i[d]}var b=m.clone();var k=b.find('input[name*="'+a+'_list_value_holder_input"]');var w=b.find('input[name*="'+a+'_list_label_holder_input"]');k.attr("name",a+"_list_value_holder_input["+d+"]").val(typeof g[i[d]]!=="undefined"?g[i[d]]:y);w.attr("name",a+"_list_label_holder_input["+d+"]").val(i[d]);f.append(b)}f.find(".freeform_delete_button").show().last().hide()}else if(r=="list"){_=t(".list_holder_input",c);m=_.eq(0).clone();_.remove();i.push("");for(d=0,v=i.length;d<v;d++){c.append(m.clone().find('input[name*="'+a+'_list_holder_input"]').val(i[d]).end())}c.find(".freeform_delete_button").show().last().hide()}}n.setupMultiRowDelegate=function(e,n){e=e||"list";n=n||"";t("body").on("fieldTypeChanged",function(i,l){if(l!=n){return}var o=t("#"+n+"_list_type");var s=t('select[name="'+n+'_list_type"]');var u=t("#"+n+"_option_holder > div");var f=t("#"+n+"_type_list_holder");var c=t("#"+n+"_type_value_label_holder");var d=t("#"+n+"_type_nld_textarea_holder");var v=[];s.find("option").each(function(){v.push(t(this).val())});r(f,"list_holder_input");r(c,"value_label_holder_input");u.on("click",".freeform_delete_button",function(){t(this).parent().remove()});u.hide();var h=[];t.each(v,function(r,a){var i=t("#"+n+"_type_"+r+"_holder");var l=r;if(l==e){i.addClass("active");i.show()}});s.change(function(r){var i=s.val();var l=t("#"+n+"_type_"+i+"_holder");u.removeClass("active");l.addClass("active");u.hide();l.show();a(e,i,n);if(i!="channel_field"){e=i}o.val(i);r.preventDefault();return false}).change()})};t.fn.sortElements=t.fn.sortElements||function(){var e=[].sort;return function(t,n){n=n||function(){return this};var r=this.map(function(){var e=n.call(this),t=e.parentNode,r=t.insertBefore(document.createTextNode(""),e.nextSibling);return function(){if(t===this){return}t.insertBefore(this,r);t.removeChild(r)}});return e.call(this,t).each(function(e){r[e].call(n.call(this))})}}();t.fn.outerHTML=t.fn.outerHTML||function(){return t(this)[0].outerHTML};t.fn.removeTags=t.fn.removeTags||function(){this.each(function(){if(jQuery(this).children().length===0){jQuery(this).replaceWith(jQuery(this).text())}else{jQuery(this).children().unwrap()}});return this};n.jQUIDialog=function(e){e=t.extend({message:"No Message Defined",ok:"OK",title:"Alert",preventDefault:true,immediate:false,modal:true},e);var n={};var r=typeof t.fn.dialog!=="undefined";var a=t("<div></div>").html(e.message);if(r){if(typeof e.cancel!=="undefined"){n[e.cancel]={click:function(){if(typeof e.cancelClick!=="undefined"){e.cancelClick()}t(this).dialog("close")},"class":"submit btn ",text:e.cancel}}n[e.ok]={click:function(){if(typeof e.close!=="undefined"){e.close()}if(typeof e.okClick!=="undefined"){e.okClick()}t(this).dialog("close")},"class":"submit btn action",text:e.ok};a.dialog({autoOpen:false,title:e.title,buttons:n,dialogClass:"ss_jqui_dialog",zIndex:50,modal:e.modal,close:function(){t(".ui-dialog.ss_jqui_dialog").remove()}})}var i=function(t){if(t&&e.preventDefault){t.preventDefault()}if(r){a.dialog("open")}else{window.alert(e.message)}if(t&&e.preventDefault){return false}};if(e.immediate){i()}else{return i}};n.setUpChosenSelect=function(e){return};n.elementSearch=function(e,n,r,a){var i=t(e);var l=t(n);i.bind("keyup",function(e){var n=t(this);if(n.val()===""||n.attr("placeholder")&&n.val()==n.attr("placeholder")){l.show()}else{l.hide()}var i=new RegExp(n.val().toLowerCase());l.filter(function(e){var n=t(this),l=n,o;if(r){l=l.find(r)}if(a!="html"&&a!="text"&&l.attr(a)){o=l.attr(a)}else if(a=="text"){o=l.text()}else{o=l.html()}return i.exec(o.toLowerCase())}).show()});i.bind("keydown",function(e){if(e.keyCode==13){return false}});return i};n.strRepeat=function(e,t){var n="";while(t--){n+=e}return n};n.fractionToFloat=function(e,t,n){n=n||100;return Math.round(100*(e/t*n))/100};n.getUrlArgs=function(e){e=e||window.location.href;var t={};var n=e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,r){t[n]=r});return t};var i=[];n.cycle=function(e){if(!t.isArray(e)){e=Array.prototype.slice.call(arguments)}var n=e.join("|");if(typeof i[n]==="undefined"||typeof e[i[n]+1]==="undefined"){i[n]=0}else{i[n]++}return e[i[n]]};n.clearCycle=function(){i=[];return this};n.showValidationErrors=function(e){var n="<ul>";var r=t("#freeform-shared-model-errors");r.html("Error building errors.");t.each(e,function(e,r){n+="<li>";n+=t.isArray(r)?r.join("</li><li>"):r;n+="</li>"});r.html(n);t(".freeform-error-modal").trigger("modal:open")};t(function(){t("body").on("click",".freeform_notice .notice_close",function(e){e.preventDefault();t(this).parent().slideUp();return false});t('input[name="form_fields[]"]:first, input[name="form_ids[]"]:first').parents(".setting-field").addClass("scroll-wrap");var e=t("#fancybox-content");var n=t("#mainContent .solspace_ui_wrapper:first")})})(window,jQuery);
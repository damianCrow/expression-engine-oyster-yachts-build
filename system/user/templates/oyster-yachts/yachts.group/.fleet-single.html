{exp:channel:entries disable="member_data|category_fields|pagination" cache="yes" refresh="60" require_entry="yes" status="published"}
{if no_results}{redirect="404"}{/if}

<?php
$query = ee()->db->query('SELECT * FROM exp_channel_images WHERE entry_id={entry_id} AND field_id=70');
$layoutImages = $query->num_rows();

$query = ee()->db->query('SELECT * FROM exp_channel_images WHERE entry_id={entry_id} AND field_id=69');
$exteriorGalleryImages = $query->num_rows();

$query = ee()->db->query('SELECT * FROM exp_channel_images WHERE entry_id={entry_id} AND field_id=68');
$interiorGalleryImages = $query->num_rows();
?>

{embed="site/.header" snap_to=".full-screen #yacht-nav" snap_offset="55"}

<section class="hero full-screen">
	<div id="full-image" style="background-image: url('{yacht_main_image}{image:url}{/yacht_main_image}');" class="yacht-listing-photo">
		{back_button}
		<div class="yacht-name">
			<div class="row-pad">
				<h2>{yacht_tagline}</h2>
				<h1>{title}</h1>

				<?php if ($exteriorGalleryImages > 0 || $interiorGalleryImages > 0): ?>
				<a class="gallery" href="">View Gallery</a>
				<?php endif; ?>
			</div>
		</div>
		{share_buttons}
	</div>
	<div id="yacht-nav" data-local-subnav="data-local-subnav" class="yacht-nav">
		<ul class="local-subnav">
			{if yacht_design_features:total_rows > 0}
			<li class="active"><a href="#design-features" class="scroll">Design Features</a></li>
			{/if}

			<li><a href="#specifications" class="scroll">Specifications</a></li>

			<?php if ($layoutImages > 0): ?>
			<li><a href="#yacht-layout" class="scroll">Yacht Layout</a></li>
			<?php endif; ?>

			{if yacht_documents:total_rows > 0}
			<li><a href="#download-documents" class="scroll">Documents</a></li>
			{/if}

			<li><a href="#news-thumbs" class="scroll">News</a></li>

			<?php if ($exteriorGalleryImages > 0 || $interiorGalleryImages > 0): ?>
			<li><a href="" class="gallery">Gallery</a></li>
			<?php endif; ?>

			<li><a href="" class="contact">Contact Sales</a></li>
		</ul>

		<section data-local-sidebar data-sticky-sidebar-at-bottom=".about-yacht" data-sticky-sidebar-offset="" class="yachts-yacht-sticky-header sticky-sidebar-header hide float-right">
			<div class="header">
				<h4 class="text-uppercase float-left">{title} overview</h4><i class="fa fa-angle-down float-right"></i>
			</div>
			<div class="contents">
				<aside class="overview-download columns">
					<div class="overview-contents">
						<section class="overview columns small-6 medium-12">
							<p>To find out more about the {title} model, you can download the {title} Brochure below.</p>
							<p>If you would like more information, please complete the Contact Sales form or alternatively call us on <a href="tel:+442380831010">+44 (0)2380 831 010</a></p>
						</section>
						{yacht_brochure}
						<figure class="download-pdf clearfix">
							<div class="download-thumb column small-3"><img src="{yacht_brochure:thumbnail}"></div>
							<figcaption class="description-download column small-9">
								<a class="title text-uppercase" href="{yacht_brochure:file}" target="_blank">{yacht_brochure:title} </a>
								<a class="external-file-btn button-solid-white text-uppercase" href="{yacht_brochure:file}" target="_blank">Download Brochure &nbsp;{yacht_brochure:file}<span>(<?php echo number_format({file_size} / (1024*1024), 1); ?>MB)</span>{/yacht_brochure:file}</a>
							</figcaption>
						</figure>
						{/yacht_brochure}
					</div>
				</aside>
			</div>
		</section>
	</div>
</section>

<section class="about-yacht">
	<div class="row row-pad">
		<div class="large-offset-1 large-7 float">
			<h2>{yacht_tagline}</h2>
			<h1>{title}</h1>
			{yacht_about}
		</div>
		<div class="large-offset-1 large-3 float-left">
			<div class="sticky-sidebar">
				<aside class="overview-download columns">
					<h3 class="text-uppercase">{title} Overview</h3>
					<div class="overview-contents">
						<section class="overview columns small-6 medium-12">
							<p>To find out more about the {title} model, you can download the {title} Brochure below.</p>
							<p>If you would like more information, please complete the Contact Sales form or alternatively call us on <a href="tel:+442380831010">+44 (0)2380 831 010</a></p>
						</section>
						{yacht_brochure}
						<figure class="download-pdf clearfix">
							<div class="download-thumb column small-3"><img src="{yacht_brochure:thumbnail}"></div>
							<figcaption class="description-download column small-9">
								<a class="title text-uppercase" href="{yacht_brochure:file}" target="_blank">{yacht_brochure:title} </a>
								<a class="external-file-btn button-solid-white text-uppercase" href="{yacht_brochure:file}" target="_blank">Download Brochure &nbsp;{yacht_brochure:file}<span>(<?php echo number_format({file_size} / (1024*1024), 1); ?>MB)</span>{/yacht_brochure:file}</a>
							</figcaption>
						</figure>
						{/yacht_brochure}
					</div>
				</aside>
			</div>
		</div>
	</div>
</section>


{if yacht_testimonials:total_rows > 0}
<section class="quote-testimonials row">
	{yacht_testimonials}
	<blockquote class="text-uppercase">
		<p>{yacht_testimonials:testimonial}</p>
		<footer>
			<cite>{yacht_testimonials:by_whom}</cite>
		</footer>
	</blockquote>
	{/yacht_testimonials}
	<div class="nav-points"></div>
</section>
{/if}


{if yacht_design_features:total_rows > 0}
<section id="design-features" class="design-features">
	<div class="banner">Design features</div>
	<div class="content row row-pad">

		{yacht_design_features}
		<div class="large-4 small-6 content-col">
			<div style="background-image:url('{yacht_design_features:feature_image}')" class="feature-image"></div>
			<div class="feature-content">
				<h4>{yacht_design_features:feature_title}</h4>
				{yacht_design_features:feature_description}
			</div>
		</div>
		{/yacht_design_features}

	</div>
</section>
{/if}


{if yacht_dimensions:total_rows > 0 OR yacht_performance_features:total_rows > 0}
<section id="specifications" class="specifications yachts-yacht-spec">
	<div class="banner">Specifications</div>
	{if yacht_dimensions:total_rows > 0}
	<div class="content row row-pad">
		<table class="table specs-table">
			<tbody>
				<tr>
					<td colspan="9" class="heading text-uppercase">Dimensions</td>
				</tr>
				<tr>
					<th class="text-uppercase">Length Overall - Inc. Pulpit</th>
					<th class="text-uppercase">Length of Hull</th>
					<th class="text-uppercase">Length of Waterline</th>
					<th class="text-uppercase">Beam</th>
					<th class="text-uppercase">Draft Standard</th>
					<th class="text-uppercase">Draft Shoal</th>
					<th class="text-uppercase">Draft Centreboard Up</th>
					<th class="text-uppercase">Draft Centreboard Down</th>
				</tr>
				{yacht_dimensions}
				<tr>
					<td>{yacht_dimensions:length_overall}</td>
					<td>{yacht_dimensions:length_of_hull}</td>
					<td>{yacht_dimensions:length_of_waterline}</td>
					<td>{yacht_dimensions:beam}</td>
					<td>{yacht_dimensions:draft_standard}</td>
					<td>{yacht_dimensions:draft_shoal}</td>
					<td>{yacht_dimensions:draft_centreboard_up}</td>
					<td>{yacht_dimensions:draft_centreboard_down}</td>
				</tr>
				{/yacht_dimensions}
			</tbody>
		</table>
	</div>
	{/if}

	{if yacht_performance_features:total_rows > 0}
	<div class="content row row-pad">
		<table class="table specs-table">
			<tbody>
				<tr>
					<td colspan="9" class="heading text-uppercase">Preformance Features</td>
				</tr>
				<tr>
					<th class="text-uppercase">Displacement - Standard Keel</th>
					<th class="text-uppercase">Typical Engine</th>
					<th class="text-uppercase">Tanks - Fuel</th>
					<th class="text-uppercase">Tanks - Water</th>
					<th class="text-uppercase">Sail Area - Inc. 150% Foretriangle</th>
					<th class="text-uppercase">Air Draft Approx - exc. Antennae</th>
				</tr>
				{yacht_performance_features}
				<tr>
					<td>{yacht_performance_features:displacement_standard_keel}</td>
					{if yacht_performance_features:count == 1}
						<td rowspan="2">{yacht_performance_features:typical_engine}</td>
					{/if}
					<td>{yacht_performance_features:tanks_fuel}</td>
					<td>{yacht_performance_features:tanks_water}</td>
					<td>{yacht_performance_features:sail_area}</td>
					<td>{yacht_performance_features:air_draft}</td>
				</tr>
				{/yacht_performance_features}
			</tbody>
		</table>
	</div>
	{/if}
</section>
{/if}

<?php if ($layoutImages > 0): ?>
<section id="yacht-layout" class="yacht-layout">
	<div class="banner">Yacht Layout</div>
	<div class="content row row-pad">
		<div class="large-10 large-offset-1 end">
			<div id="layout-slider">
				{yacht_layout}
				<div class="cycle-slide"><img src="{image:url}"></div>
				{/yacht_layout}
			</div>
			<ul class="slider-pager<?php if ($layoutImages === 1): ?> hide<?php endif; ?>">{yacht_layout}<li><a><span style="background-image:url('{image:url:small}');"></span></a></li>{/yacht_layout}</ul>
		</div>
	</div>
</section>
<?php endif; ?>


{if yacht_documents:total_rows > 0}
<section id="download-documents" class="download-documents">
	<div class="banner">Documents</div>
	<div class="row content">
		<ul>
			{yacht_documents}
			<li class="columns medium-4 small-6">
				<figure class="download-pdf clearfix">
					<div class="download-thumb column small-3">
						<img src="{yacht_documents:thumbnail}">
					</div>
					<figcaption class="description-download column small-9">
						<a class="title text-uppercase" href="{yacht_documents:file}">{yacht_documents:title}</a>
						<a class="external-file-btn button-solid-white text-uppercase" href="{yacht_documents:file}" target="_blank">Download &nbsp;{yacht_documents:file}<span class="size text-uppercase">(<?php echo number_format({file_size} / (1024*1024), 1); ?>MB)</span>{/yacht_documents:file}</a>
					</figcaption>
				</figure>
			</li>
			{/yacht_documents}
		</ul>
	</div>
</section>
{/if}
 

{if parents:entry_ids}
<section id="news-thumbs" class="news-thumbs">
	<div class="banner">News</div>
	<div class="row wrapper">
		<ul>

			{parents field="article_yacht" status="published"}
			<li class="columns medium-4 small-6">
				<div class="content">
					<div {parents:article_main_image}style="background-image:url('{image:url}')"{/parents:article_main_image} class="news-thumb-image">
						{share_buttons}
					</div>
					<div class="news-details">
						<time datetime="{parents:entry_date format="%Y-%m-%d %H:%i"}" class="text-uppercase">{parents:entry_date format="%d %F %Y"}</time>
						<h3 class="text-uppercase"><a href="{parents:url_title_path='news/article'}">{parents:title}</a></h3>
						{parents:article_excerpt}
						<a href="{parents:url_title_path='news/article'}" class="read-more">READ MORE</a>
					</div>
				</div>
			</li>
			{/parents}

		</ul>
	</div>
</section>
{/if}

<?php if ($exteriorGalleryImages > 0): ?>
<div id="exterior-gallery" class="gallery-content">
	{yacht_exterior_gallery}
	<a href="{image:url}" data-sub-html="{image:description}">
		<img src="{image:url:thumb}" />
	</a>
	{/yacht_exterior_gallery}
</div>
<?php endif; ?>

<?php if ($interiorGalleryImages > 0): ?>
<div id="interior-gallery" class="gallery-content">
	{yacht_interior_gallery}
	<a href="{image:url}" data-sub-html="{image:description}">
		<img src="{image:url:thumb}" />
	</a>
	{/yacht_interior_gallery}
</div>
<?php endif; ?>

{footer}

{/exp:channel:entries}